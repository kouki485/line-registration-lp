<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‰¯åå…¥ã§æœˆ50ä¸‡å††ã‚’ç›®æŒ‡ã™ - LINEç„¡æ–™ç™»éŒ²</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="container">
      <!-- LPç”»åƒã‚’ãã®ã¾ã¾è¡¨ç¤º -->
      <img src="lp2.png" alt="å‰¯åå…¥LP" class="lp-image">
      
      <!-- ã‚¯ãƒªãƒƒã‚¯å¯èƒ½ãªLINEç™»éŒ²ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ -->
      <!-- 1ã¤ç›®ã®LINEç™»éŒ²ãƒœã‚¿ãƒ³ï¼ˆä¸Šéƒ¨ï¼‰ -->
      <a href="https://ideaofficial.link-lc.com/adoptin/1/?elinktag=3viiRysL" class="everline_link" target="_blank" rel="noopener noreferrer">
        <img src="line-button.png" alt="LINEç™»éŒ²ãƒœã‚¿ãƒ³" class="line-button line-button-1">
      </a>
      
      <!-- 2ã¤ç›®ã®LINEç™»éŒ²ãƒœã‚¿ãƒ³ï¼ˆä¸­éƒ¨ï¼‰ -->
      <a href="https://ideaofficial.link-lc.com/adoptin/1/?elinktag=3viiRysL" class="everline_link" target="_blank" rel="noopener noreferrer">
        <img src="line-button.png" alt="LINEç™»éŒ²ãƒœã‚¿ãƒ³" class="line-button line-button-2">
      </a>
      
      <!-- 3ã¤ç›®ã®LINEç™»éŒ²ãƒœã‚¿ãƒ³ï¼ˆä¸‹éƒ¨1ï¼‰ -->
      <a href="https://ideaofficial.link-lc.com/adoptin/1/?elinktag=3viiRysL" class="everline_link" target="_blank" rel="noopener noreferrer">
        <img src="line-button.png" alt="LINEç™»éŒ²ãƒœã‚¿ãƒ³" class="line-button line-button-3">
      </a>
    </div>
    
    <script type='text/javascript' src='https://ideaofficial.link-lc.com/adoptin/js/1/access.js'></script>
    <script src="script.js"></script>
    <!-- elinkè¨ˆæ¸¬ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å…ˆã«èª­ã¿è¾¼ã¿ -->
    <!-- CVè¨ˆæ¸¬ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆå‹ã ã¡ç™»éŒ²å¾Œã®èª˜å°LPç”¨ï¼‰ -->
    <script type='text/javascript' src='https://ideaofficial.link-lc.com/js/everline_cvset.js'></script>
    <script>
      // elinkè¨ˆæ¸¬ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®åˆæœŸåŒ–å®Œäº†ã‚’å¾…ã¤
      function waitForElink(callback) {
        if (typeof window.elink !== 'undefined' || typeof window.adoptin !== 'undefined') {
          callback();
        } else {
          setTimeout(() => waitForElink(callback), 100);
        }
      }

      document.addEventListener('DOMContentLoaded', function () {
        console.log('ğŸ” elinkè¨ˆæ¸¬ã‚¹ã‚¯ãƒªãƒ—ãƒˆé–‹å§‹');
        
        const params = new URLSearchParams(window.location.search);
        const adCode = params.get("AD_CODE");      // ä¾‹: 0001_00002
        const elinktag = params.get("elinktag");   // ä¾‹: 3viiRysL
        const euid = params.get("euid");           // euidãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
        const uid = params.get("uid");             // uidãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
        
        console.log('ğŸ“Š AD_CODE:', adCode);
        console.log('ğŸ·ï¸ elinktag:', elinktag);
        console.log('ğŸ†” euid:', euid);
        console.log('ğŸ†” uid:', uid);
    
        const baseUrl = "https://ideaofficial.link-lc.com/adoptin/1/";
        const defaultElinkTag = "3viiRysL";
        
        // URLã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ ã™ã‚‹å…±é€šé–¢æ•°
        function buildUrlWithParams(baseUrl, params) {
          const url = new URL(baseUrl);
          Object.entries(params).forEach(([key, value]) => {
            if (value !== null && value !== undefined && value !== '') {
              url.searchParams.append(key, value);
            }
          });
          return url.toString();
        }
    
        // âœ… ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢å½¢å¼ã§ç”Ÿæˆ
        const validCodes = Array.from({ length: 66 }, (_, i) => {
          return "0001_" + String(i + 1).padStart(5, "0");
        });
        
        console.log('âœ… æœ‰åŠ¹ãªAD_CODEç¯„å›²:', validCodes[0], 'ã€œ', validCodes[validCodes.length - 1]);
    
        const links = document.querySelectorAll("a.everline_link");
        console.log('ğŸ”— è¦‹ã¤ã‹ã£ãŸãƒªãƒ³ã‚¯æ•°:', links.length);
        
        // elinkè¨ˆæ¸¬ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®åˆæœŸåŒ–å®Œäº†ã‚’å¾…ã£ã¦ã‹ã‚‰ãƒªãƒ³ã‚¯ã‚’æ›¸ãæ›ãˆ
        waitForElink(() => {
          console.log('âœ… elinkè¨ˆæ¸¬ã‚¹ã‚¯ãƒªãƒ—ãƒˆåˆæœŸåŒ–å®Œäº†');
          
          // BOT IDã‚’ç¢ºèª
          const currentBotId = checkBotId();
          console.log('ğŸ¤– ä½¿ç”¨ä¸­ã®BOT ID:', currentBotId);
          
          // ãƒªãƒ³ã‚¯ã‚¯ãƒªãƒƒã‚¯æ™‚ã®è»½é‡ãªè¨ˆæ¸¬ã‚’è¨­å®šã™ã‚‹é–¢æ•°
          function setupClickTracking(link, url) {
            link.addEventListener('click', function(e) {
              console.log('ğŸ”¥ ãƒªãƒ³ã‚¯ã‚¯ãƒªãƒƒã‚¯æ¤œå‡º:', url);
              console.log('ğŸ“± ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±:', navigator.userAgent);
              
              // ãƒ¢ãƒã‚¤ãƒ«ç’°å¢ƒãƒã‚§ãƒƒã‚¯
              const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
              console.log('ğŸ“± ãƒ¢ãƒã‚¤ãƒ«ç’°å¢ƒ:', isMobile ? 'Yes' : 'No');
              
              // ã‚¯ãƒªãƒƒã‚¯è¨ˆæ¸¬ã®ã¿å®Ÿè¡Œï¼ˆç™»éŒ²å®Œäº†è¨ˆæ¸¬ã¯å®Ÿè¡Œã—ãªã„ï¼‰
              try {
                // 1. ã‚¯ãƒªãƒƒã‚¯è¨ˆæ¸¬æƒ…å ±ã‚’LocalStorageã«ä¿å­˜
                const clickData = {
                  timestamp: Date.now(),
                  adCode: adCode,
                  elinktag: elinktag,
                  euid: euid,
                  uid: uid,
                  url: url,
                  userAgent: navigator.userAgent,
                  isMobile: isMobile,
                  event: 'click'
                };
                localStorage.setItem('elink_click_' + Date.now(), JSON.stringify(clickData));
                console.log('ğŸ“Š ã‚¯ãƒªãƒƒã‚¯æƒ…å ±ã‚’localStorageã«ä¿å­˜');
                
                // 2. è»½é‡ãªã‚¯ãƒªãƒƒã‚¯è¨ˆæ¸¬ãƒ”ã‚¯ã‚»ãƒ«ã®ã¿é€ä¿¡
                sendClickPixel(adCode, elinktag, euid, uid);
                
                console.log('âœ… ã‚¯ãƒªãƒƒã‚¯è¨ˆæ¸¬å®Œäº†ï¼ˆç™»éŒ²å®Œäº†è¨ˆæ¸¬ã¯å®Ÿéš›ã®ç™»éŒ²å¾Œã«å®Ÿè¡Œï¼‰');
                
              } catch (error) {
                console.error('âŒ ã‚¯ãƒªãƒƒã‚¯æ™‚è¨ˆæ¸¬ã‚¨ãƒ©ãƒ¼:', error);
              }
            });
          }
          
          if (adCode && elinktag) {
            const finalUrl = buildUrlWithParams(baseUrl, {
              AD_CODE: adCode,
              elinktag: elinktag,
              euid: euid || '###uid###'  // æ—¢å­˜ã®euidãŒã‚ã‚Œã°ãã‚Œã‚’ä½¿ç”¨ã€ãªã‘ã‚Œã°ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
            });
            console.log('âœ… ä¸¡ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ‰åŠ¹ â†’ ', finalUrl);
            links.forEach(link => {
              link.href = finalUrl;
              link.style.pointerEvents = "auto";
              link.style.opacity = "1";
              setupClickTracking(link, finalUrl);
            });
          } else if (adCode && validCodes.includes(adCode)) {
            const finalUrl = buildUrlWithParams(baseUrl, {
              AD_CODE: adCode,
              elinktag: defaultElinkTag,
              euid: euid || '###uid###'  // æ—¢å­˜ã®euidãŒã‚ã‚Œã°ãã‚Œã‚’ä½¿ç”¨ã€ãªã‘ã‚Œã°ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
            });
            console.log('âœ… AD_CODEæœ‰åŠ¹ãƒ»elinktagæœªæŒ‡å®š â†’ ', finalUrl);
            links.forEach(link => {
              link.href = finalUrl;
              link.style.pointerEvents = "auto";
              link.style.opacity = "1";
              setupClickTracking(link, finalUrl);
            });
          } else if (elinktag) {
            const finalUrl = buildUrlWithParams(baseUrl, {
              elinktag: elinktag,
              euid: euid || '###uid###'  // æ—¢å­˜ã®euidãŒã‚ã‚Œã°ãã‚Œã‚’ä½¿ç”¨ã€ãªã‘ã‚Œã°ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
            });
            console.log('âœ… elinktagæœ‰åŠ¹ãƒ»AD_CODEæœªæŒ‡å®š â†’ ', finalUrl);
            links.forEach(link => {
              link.href = finalUrl;
              link.style.pointerEvents = "auto";
              link.style.opacity = "1";
              setupClickTracking(link, finalUrl);
            });
          } else {
            // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸è¶³æ™‚ã‚‚euidãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä»˜ä¸
            console.log('âš ï¸ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸è¶³ - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§ãƒªãƒ³ã‚¯æ§‹ç¯‰');
            const finalUrl = buildUrlWithParams(baseUrl, {
              elinktag: defaultElinkTag,
              euid: euid || '###uid###'  // æ—¢å­˜ã®euidãŒã‚ã‚Œã°ãã‚Œã‚’ä½¿ç”¨ã€ãªã‘ã‚Œã°ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
            });
            links.forEach(link => {
              link.href = finalUrl;
              link.style.pointerEvents = "auto";
              link.style.opacity = "1";
              setupClickTracking(link, finalUrl);
            });
          }
          
          console.log('ğŸ¯ elinkè¨ˆæ¸¬ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Œäº†');
        });
        
        // è»½é‡ãªã‚¯ãƒªãƒƒã‚¯è¨ˆæ¸¬ãƒ”ã‚¯ã‚»ãƒ«é€ä¿¡é–¢æ•°
        function sendClickPixel(adCode, elinktag, euid, uid) {
          const pixelImg = document.createElement('img');
          pixelImg.style.display = 'none';
          pixelImg.style.width = '1px';
          pixelImg.style.height = '1px';
          
          let trackingUrl = 'https://ideaofficial.link-lc.com/adoptin/1/click.gif?';
          const params = new URLSearchParams();
          
          if (adCode) params.append('AD_CODE', adCode);
          if (elinktag) params.append('elinktag', elinktag);
          if (euid) params.append('euid', euid);
          if (uid) params.append('uid', uid);
          params.append('event', 'click');
          params.append('_t', Date.now().toString());
          
          pixelImg.src = trackingUrl + params.toString();
          document.body.appendChild(pixelImg);
          
          console.log('ğŸ“Š ã‚¯ãƒªãƒƒã‚¯è¨ˆæ¸¬ãƒ”ã‚¯ã‚»ãƒ«é€ä¿¡:', pixelImg.src);
          
          // 3ç§’å¾Œã«å‰Šé™¤
          setTimeout(() => {
            if (pixelImg.parentNode) {
              pixelImg.parentNode.removeChild(pixelImg);
            }
          }, 3000);
        }
        
        // BOT IDç¢ºèªé–¢æ•°
        function checkBotId() {
          // ç¾åœ¨ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚½ãƒ¼ã‚¹ã‹ã‚‰BOT IDã‚’ç¢ºèª
          const scripts = document.querySelectorAll('script[src*="ideaofficial.link-lc.com/adoptin/js/"]');
          let botId = '1'; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
          
          scripts.forEach(script => {
            const match = script.src.match(/\/adoptin\/js\/(\d+)\/access\.js/);
            if (match) {
              botId = match[1];
            }
          });
          
          console.log('ğŸ¤– æ¤œå‡ºã•ã‚ŒãŸBOT ID:', botId);
          return botId;
        }
      });
    </script>
</body>
</html> 